# 프로젝트 : 🌲 크리스마스 프로모션

> 프로젝트 목표

1. 중복된 할인과 증정을 허용해서, 고객들이 혜택을 많이 받는다는 것을 체감할 수 있게 하는 것
2. 올해 12월에 지난 5년 중 최고의 판매 금액을 달성
3. 12월 이벤트 참여 고객의 5%가 내년 1월 새해 이벤트에 재참여하는 것

## 🚀 기능 요구 사항

> 프로그램 전체 흐름

1. 예상 방문 날짜를 입력
2. 주문하실 메뉴와 개산을 입력
3. 주문 메뉴 확인
4. 할인 전 총 주문 금액 확인
5. 증정 메뉴 확인
6. 혜택 내역 확인
7. 총 혜택 금액 확인
8. 할인 후 예상 결제 금액 확인
9. 12월 이벤트 배지 확인

> **프로젝트 세부사항**

## 📆12월 이벤트 계획

- **크리스마스 디데이 할인**
    - 이벤트 기간: 2023.12.1 ~ 2023.12.25
    - 1,000원으로 시작하여 크리스마스가 다가올수록 날마다 할인 금액이 100원씩 증가
      총주문 금액에서 해당 금액만큼 할인 (e.g. 시작일인 12월 1일에 1,000원, 2일에 1,100원, ..., 25일엔 3,400원 할인)
- **평일 할인(일요일~목요일)**: 평일에는 디저트 메뉴를 메뉴 1개당 2,023원 할인
- **주말 할인(금요일, 토요일)**: 주말에는 메인 메뉴를 메뉴 1개당 2,023원 할인
- **특별 할인**: 이벤트 달력에 별이 있으면 총주문 금액에서 1,000원 할인
- **증정 이벤트**: 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개 증정
- **이벤트 기간**: '크리스마스 디데이 할인'을 제외한 다른 이벤트는 2023.12.1 ~ 2023.12.31 동안 적용

## 📛 혜택 금액에 따른 12월 이벤트 배지 부여

- 총혜택 금액에 따라 다른 이벤트 배지를 부여
    - 5천 원 이상: 별
    - 1만 원 이상: 트리
    - 2만 원 이상: 산타
- 배지는 2024 새해 이벤트에서 활용할 예정

## ⚠️ 고객에게 안내할 이벤트 주의 사항

- 총주문 금액 10,000원 이상부터 이벤트가 적용
- 음료만 주문 시, 주문할 수 없음
- 메뉴는 한 번에 최대 20개까지만 주문할 수 있음
    - (e.g. 시저샐러드-1, 티본스테이크-1, 크리스마스파스타-1, 제로콜라-3, 아이스크림-1의 총개수는 7개)

<hr>

## 🔎 기능 목록

| _**factory 패키지 목록**_ | _**역할**_                  | _**주요 기능**_                                                                                                                                                                                                           |
|----------------------|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ChristmasFactory     | 크리스마스 프로모션에 객체들 생성을 관리한다. | - [X] `ChristmasFactory` : Controller에 필요한 객체를 주입하고 생성시킨다. <br>- [X] `eventDetailService` : eventDetailService에 필요한 객체를 주입하고 생성시킨다. <br>- [X] `orderService()` : orderService에 필요한 객체를 주입하고 생성시킨다. <br>- [X] 이하 생략... |

| _**controller 패키지 목록**_ | _**역할**_                               | _**주요 기능**_                                                                                                                                                                                                                                                                                                   |
|-------------------------|----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ChristmasController     | 사용자의 요청을 처리해줄 적절한 객체에 메시지를 보네 결과를 얻는다. | - [X] `run` : 프로그램을 실행한다. <br>- [X] `createVisitDate` : 방문 날짜를 입력한다. <br>- [X] `orderMenus` : 메뉴를 주문한다. <br>- [X] `checkTotalOrderPrice` : 총 주문 금액을 확인한다. <br>- [X] `checkGiveawayEvent` : 증정 이벤트를 확인한다. <br>- [X] `checkBenefitDetails` : 총 혜택 내역을 확인한다. <br>- [X] `checkPaymentAndBadge` : 결제 내역과 배지를 확인한다. |

| _**service 패키지 목록**_ | _**역할**_                                                           | _**주요 기능**_                                                                                                                                                                                                                                                                                                                                                  |
|----------------------|--------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| OrderService         | Controller로부터 요청된 주문 입력을 OrderRepository에 저장하고 출력 형태로 반환한다.        | - [X] `saveVisitDate` : 방문 날짜를 저장한다. <br>- [X] `checkOrderMenus` : 주문 메뉴를 확인한다. <br>- [X] `getVisitDate` : 방문 날짜 일수를 가져온다. <br>- [X] `checkTotalOrderPrice` : 총 주문 금액을 확인한다. <br>- [X] `checkExpectPaymentPrice` : 예상 결제 금액을 확인한다.                                                                                                                           | 
| EventDetailService   | Controller로부터 요청된 주문 입력을 EventDetailsRepository에 저장하고 출력 형태로 반환한다. | - [x] `showGiveawayMenuEvent` : 증정 메뉴 이벤트를 확인한다. <br>- [X] `saveChristmasDDayDiscount` : 크리스마스 디데이 할인을 저장한다. <br>- [X] `saveDaysDiscount` : 요일 할인을 저장한다. <br>- [X] `saveSpecialEventDiscount` : 특별 이벤트 할인을 저장한다. <br>- [X] `showBenefitDetails` : 혜택 내역을 확인한다. <br>- [X] `showTotalBenefitPrice` : 총 혜택 가격을 확인한다. <br>- [X] `showEventBadge` : 이벤트 배지를 확인한다. |

| _**repository 패키지 목록**_ | _**역할**_                                     | _**저장 목록**_                                                                                                                                                                                                          |
|-------------------------|----------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| OrderRepository         | OrderService로부터 전해진 객체를 저장하고 조회할 수 있다.       | - [X] `VisitDate` : 방문 날짜 객체  <br>- [X] `Menus` : 메뉴들 객체 <br>- [X] `TotalOrderPrice` : 총 주문 객체 <br>- [X] `ExpectPaymentPrice` : 예상 결제 금액 객체                                                                          | 
| EventDetailRepository   | EventDetailService로부터 전해진 객체를 저장하고 조회할 수 있다. | - [x] `ChristmasDDayDiscount` : 크리스마스 디데이 할인 객체 <br>- [X] `DaysDiscount` : 요일 할인 객체 <br>- [X] `SpecialEventDiscount` : 특별 이벤트 할인 객체 <br>- [X] `GiveawayMenu` : 증정 메뉴 객체  <br>- [X] `TotalDiscountPrice` : 총 할인 가격 객체 |

| _**domain.menu 패키지 목록**_    | _**역할**_                | _**주요 기능**_                                                                                                                                                                                                             |
|-----------------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Amount                      | 메뉴의 수량 데이터를 저장한다.       | ...                                                                                                                                                                                                                     |
| Menu                        | 메뉴 데이트를 저장한다.           | - [X] `isEqualName` : 이름이 같은 지 판별한다.                                                                                                                                                                                    |
| Menus                       | 메뉴들 데이터를 저장한다.          | - [X] `validateDuplicateMenu` : 중복된 메뉴가 있는지 검증한다. <br>- [X] `validateMenuCount` : 메뉴의 개수가 20개 이하인지 검증한다. <br>- [X] `getPriceValueByMenuName` : 메뉴이름의 가격을 반환한다. <br>- [X] `matchingOrderMenuCount` : 일치하는 메뉴의 개수를  반환한다. |
| Name                        | 메뉴 이름 데이터를 저장한다.        | - [X] `equal & hashCode` : 값이 같으면 동일 오버라이딩                                                                                                                                                                              |                            |
| Price                       | 메뉴의 가격 데이터를 저장한다.       | ...                                                                                                                                                                                                                     |
| _**domain.preview 패키지 목록**_ | _**역할**_                | _<div style="text-align:center;">**주요 기능**_</div>                                                                                                                                                                       |
| ChristmasDDayDiscount       | 크리스마스 디데이 할인 데이터를 저장한다. | - [X] `canApplyDDayDiscount` : 방문 날짜가 25일 기준으로 할인이 가능한지 판별한다.                                                                                                                                                           |
| DaysDiscount                | 요일 할인 데이터를 저장한다.        | ...                                                                                                                                                                                                                     |
| ExpectPaymentPrice          | 예상 결제 금액 데이터를 저장한다.     | ...                                                                                                                                                                                                                     |
| GiveawayMenu                | 증정 메뉴 데이터를 저장한다.        | ...                                                                                                                                                                                                                     |
| SpecialEventDiscount        | 특별 이벤트 할인 데이터를 저장한다.    | ...                                                                                                                                                                                                                     |
| TotalDiscountPrice          | 총 할인 가격 데이터를 저장한다.      | ...                                                                                                                                                                                                                     |
| TotalOrderPrice             | 총 주문 가격 데이터를 저장한다.      | - [x] `canApplyEvent` : 총 주문 가격이 만원 이상인지 판별한다. <br>- [x] `canGiveawayEvent` : 증정 이벤트를 받을 수 있을지 판별한다.                                                                                                                    |
| _**domain 패키지 목록**_         | _**역할**_                | _<div style="text-align:center;">**주요 기능**_</div>                                                                                                                                                                       |
| VisitDate                   | 방문 날짜 데이터를 저장한다.        | - [x] `validateDatePeriod` : 방문 날짜가 1~31일 사이인지 검증한다. <br>- [x] `getDayOfMonth` : 방문 날짜의 일수를 반환한다. <br>- [x] `getDayOfWeek` : 방문 날짜의 요일을 반환한다.                                                                           |

## ↩️ 입출력 목록

| _**io 패키지 목록**_ | _**역할**_                   | _**기능**_                                                                                                                          |
|-----------------|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| InputMapper     | 사용자의 입력에 대해 적절한 객체로 변환한다.  | - [X] `toVisitDate` : 방문 날짜 일수를 입력 받으면 `VisitDate` 객체를 반환한다.<br>- [X] `toMenus` :  주문 메뉴 입력 받으면 `Menus` 객체를 반환한다.                 |
| InputView       | 사용자의 입력을 받아 공통 범위의 검증을 한다. | - [X] `inputVisitDate` : 방문 날짜를 입력받는다. <br>- [X] `inputOrder` : 주문 내역을 입력 받는다.                                                    ||
| InputManager    | 크리스마스 프로모션의 사용자 입력을 관리한다.  | - [X] `inputVisitDate` : 방문 날짜 입력을 관리한다. <br>- [X] `inputOrderMenus` : 주문 메뉴 입력을 관리한다.                                            |
| OutputView      | 크리스마스 프로모션의 화면을 출력한다.      | - [X] `printPreviewEventMessage` : 미리보기 이벤트 메시지를 출력한다. <br>- [X] `printPreviewEventCase` : 각 이벤트 케이스 상태를 출력한다. <br>- [X] 이하 생략... |

## ⭕️ 공통 검증 목록

| _**validator 패키지 목록**_ | _**역할**_               | _**기능**_                                                                                                  |
|------------------------|------------------------|-----------------------------------------------------------------------------------------------------------|
| InputValidator         | 사용자의 입력에 대해 공통 검증을 한다. | - [X] `validateNumericDate` : 날짜의 일수가 숫자로 이루어져 있는지 검증한다. <br>- [X] `validateOrderPattern` : 주문 형식인지 검증한다. |

## 🔄 formatter 목록

| formatter 목록                | 설명           |
|-----------------------------|--------------|
| BenefitDetailsFormatter     | 혜택 세부사항 형태   |
| EventBadgeFormatter         | 이벤트 배지 형태    |
| ExpectPaymentPriceFormatter | 예상 결제 가격 형태. |
| GiveawayMenuFormatter       | 증정 메뉴 형태     |
| OrderMenuFormatter          | 주문 메뉴 형태     |
| TotalBenefitPriceFormatter  | 총 혜택 가격 형태   |
| TotalOrderPriceFormatter    | 총 주문 가격 형태   |

## 🔖 상수 목록

| _**constants.element 패키지 목록**_ | _**역할**_         | _** 주요 기능**_                                                                                                                                                |
|--------------------------------|------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PreviewElement                 | 혜택 미리보기 태그 요소    | ...                                                                                                                                                         |
| PreviewElementForm             | 미리보기 요소 형식       | ...                                                                                                                                                         |
| _**constants.message 패키지 목록**_ | _**역할**_         | _<div style="text-align:center;">**주요 기능**_</div>                                                                                                           |
| ErrorMessage                   | 에러 메시지 상수        | - [X] `getMessage` : [ERROR] 을 포함한 에러 메시지를 반환한다.                                                                                                            |
| ProgressMessage                | 진행 메시지 상수        | ...                                                                                                                                                         |
| _**constants.pattern 패키지 목록**_ | _**역할**_         | _<div style="text-align:center;">**주요 기능**_</div>                                                                                                           |
| InputPattern                   | 입력 정규식 상수        | - [X] `isNotNumeric` : 숫자를 입력하지 않으면 true를 반환한다. <br>- [X] `isNotOrderPattern` : 주문 형식이 맞지 않으면 true를 반환한다.                                                   |
| _**constants 패키지 목록**_         | _**역할**_         | _<div style="text-align:center;">**주요 기능**_</div>                                                                                                           |               |                                                                                                       |
| CategoryMenu                   | 카테고리에 따른 메뉴 상수   | - [x] `validateOnlyBeverageOrder` : 음료만 주문인지 검증한다.                                                                                                          |
| ChristmasRule                  | 크리스마스 프로모션 규칙 상수 | ...                                                                                                                                                         |
| DaysEventCategory              | 요일에 따른 할인 메뉴 상수  | - [x] `daysDiscount` : 요일에 따라 메뉴 당 2023원씩 할인한다. <br>- [x] `findCategoryMenuByDay` : 요일에 따른 할인 메뉴를 찾는다. <br>- [x] `distinctionDayType` : 요일에 따른 평일,주말을 판별한다. |
| EventBadge                     | 이벤트 배지 상수        | - [x] `getBadgeByTotalBenefitPrice` : 총 혜택 가격에 따른 배지를 반환한다.                                                                                                 |
| MenuBoard                      | 메뉴판 상수           | - [x] `validateExistMenu` : 메뉴판에 존재하는 메뉴인지 검증을 한다. <br>- [x] `calculateTotalOrderPrice` : 총 주문 가격을 계산한다.                                                    |
| SpecialEventDay                | 특별 이벤트 날짜 상수     | - [x] `specialDayEventDiscount` : 특별 이벤트 할인 날짜라면 1000원을 반환한다.                                                                                               |

## ❗️ 예외 목록

- 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
- Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.
- 방문 날짜 요청 에러 메시지
    - "[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."
- 주문 요청 에러 메시지
    - "[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."

| 예외 목록                      | 예외 상황                                                               |
|----------------------------|---------------------------------------------------------------------|
| DomainNullException        | 도메인 객체가 NULL 이면 예외가 발생한다.                                           |
| InvalidDateException       | 1~31 일수가 아니면 예외가 발생한다.                                              |
| InvalidOrderException      | 메뉴판에 없는 메뉴일때, 메뉴의 개수가 1보다 작을 , 메뉴 형식이 다를 때, 중복 메뉴를 입력했을 때 예외가 발생한다. |
| NotFoundCategoryMenuByDay  | 날짜에 따른 메뉴 카테고리를 찾지 못하면 예외가 발생한다.                                    |
| OnlyBeverageOrderException | 오직 음료만 주문 했을 때 예외가 발생한다.                                            |
| OverOrderCountException    | 주문 개수가 20개가 넘으면 예외가 발생한다.                                           |
